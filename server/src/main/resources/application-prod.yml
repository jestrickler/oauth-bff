# ==========================================
# CLOUD PRODUCTION ENVIRONMENT CONFIGURATION
# ==========================================
# Set: SPRING_PROFILES_ACTIVE=prod

spring:
  application:
    name: oauth-server

  security:
    oauth2:
      client:
        registration:
          github:
            client-id: ${GITHUB_CLIENT_ID}
            client-secret: ${GITHUB_CLIENT_SECRET}
            scope: read:user,user:email

  session:
    timeout: 15m

server:
  port: 8080
  
  # Trust X-Forwarded-* headers from load balancer
  forward-headers-strategy: framework
  
  tomcat:
    remoteip:
      remote-ip-header: X-Forwarded-For
      protocol-header: X-Forwarded-Proto
      host-header: X-Forwarded-Host
      port-header: X-Forwarded-Port
  
  servlet:
    session:
      cookie:
        same-site: lax
        secure: true
        http-only: true
        path: /

logging:
  level:
    root: WARN
    com.example.server: INFO
    org.springframework.security: INFO
