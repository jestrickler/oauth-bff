# ===========================================
# DOCKER ENVIRONMENT CONFIGURATION
# ===========================================
# Used for development via Docker Compose
# Also suitable for cloud dev/test environments
# ===========================================

spring:
  application:
    name: oauth-server

  security:
    oauth2:
      client:
        registration:
          github:
            client-id: ${GITHUB_CLIENT_ID}
            client-secret: ${GITHUB_CLIENT_SECRET}

  session:
    timeout: 15m

server:
  port: 8080
  
  # Trust X-Forwarded-* headers from nginx
  forward-headers-strategy: framework
  
  # Configure Tomcat to parse X-Forwarded-* headers
  tomcat:
    remoteip:
      remote-ip-header: X-Forwarded-For
      protocol-header: X-Forwarded-Proto
      host-header: X-Forwarded-Host
      port-header: X-Forwarded-Port
  
  servlet:
    session:
      cookie:
        same-site: lax
        secure: false
        http-only: true
        path: /

# Same-site via nginx proxy (no CORS needed)
# nginx serves both frontend and backend from same origin

logging:
  level:
    root: INFO
    com.example.server: DEBUG
    org.springframework.security: DEBUG
